
\section{Diagrammi di Bode}
I \textit{diagrammi di Bode} sono strumenti grafici utili a rappresentare la
funzione di risposta armonica $W(j\omega)$ che permette di descrivere il
comportamento in frequenza dei sistemi dinamici.

I diagrammi di Bode si dividono in due grafici, uno per rappresentare il modulo
di $W(j\omega)$, l'altro per la fase e prendono rispettivamente il nome di
diagramma del modulo e diagramma di fase.

Spesso l'asse delle ascisse è rappresentato in scala logaritmica, data
l'elevata ampiezza del dominio delle funzioni, di conseguenza il rapporto tra
due pulsazioni equidistanziate è sempre pari a dieci.
Questa distanza viene chiamata \textit{decade}.

L'asse lineare viene invece rappresentato in scala lineare ma i valori
riportati sono espressi in \textit{deciBel}
$$
|W(j\omega)|_{\si{\deci\bel}} = 20\log_{10}|W(j\omega)|
$$
Si usa per comodità il fattore $20$ e non $10$ come da definizione.
Il grafico prende il nome di scala semilogaritmica.
\begin{figure}[h]
\centering
\begin{tikzpicture}[
yscale=2/30,xscale=7/5
]
\tikzset{
semilog lines/.style={black},
}
\semilog{-2}{3}{-20}{10}
\end{tikzpicture}
\end{figure}

Il diagramma della fase è anch'esso rappresentato in scala logaritmico e la
fase viene rappresentata in scala lineare, in gradi o radianti.

Uno strumento rapido per rappresentare i diagrammi di Bode è quello di
utilizzare i \textit{diagrammi asintotici}, una rappresentazione approssimata
ma molto rapida dei sistemi.
Conviene innanzitutto trasformare la funzione di trasferimento nella forma di
Bode
$$
W(j\omega) = \frac{K_B}{(j\omega)^g} \frac{\prod_i (1+j\omega \tau_{zi})
\prod_i (1-\frac{\omega^2}{\omega_{nz_i}^2} +
\frac{2\zeta_{pi}}{\omega_{np_i}}\omega j) }
{\prod_i (1+j\omega \tau_{pi})
\prod_i (1-\frac{\omega^2}{\omega_{np_i}^2} +
\frac{2\zeta_{pi}}{\omega_{np_i}}\omega j) }
$$

Si vuole tracciare il modulo in deciBel
$$
|W(j\omega)|_{\si{\deci\bel}} = 20\log_{10}|W(j\omega)|
$$
Sfruttando le proprietà del logaritmo
$$\begin{aligned}
|W(j\omega)|_{\si{\deci\bel}} &= 20\log_{10}|K_B|-20g\cdot\log_{10}|j\omega| +
\sum_i 20\log_{10}|1+j\omega\tau_{zi}| + \\
&+\sum_i 20 \log_{10}
\left|1-\frac{\omega^2}{\omega_{nz_i}^2} +
\frac{2\zeta_{zi}}{\omega_{nz_i}}\omega j\right|
- \sum_i 20\log_{10}|1+j\omega\tau_{pi}| -\\
&-\sum_i 20 \log_{10}
\left|1-\frac{\omega^2}{\omega_{np_i}^2} +
\frac{2\zeta_{pi}}{\omega_{np_i}}\omega j\right|
\end{aligned}$$

Sono presenti quattro tipologie di termini, si possono tracciare singolarmente
e poi sommare tra di loro.
Facendo riferimento in questo caso ai poli si hanno i seguenti termini.
$$
W_a(j\omega) = K_B,\quad W_b(j\omega)=\frac{1}{j\omega},\quad W_c(j\omega)=
\frac{1}{1+j\omega\tau},\quad
W_d(j\omega)=\frac{1}{1-\frac{\omega^2}{\omega_n^2}+\frac{2\zeta\omega}{\omega_n
} }
$$

\textbf{Termine guadagno}
Il termine $W_a$ è un guadagno costante, non dipende dalla frequenza, viene
rappresentato come una retta orizzontale sul diagramma di Bode, maggiore o
minore di 0 se si ha un'amplificazione o un'attenuazione
\begin{figure}[h]
\centering
\begin{tikzpicture}[
gnuplot def/.append style={prefix={tikz/}},
yscale=2/20,xscale=7/5
]
\tikzset{
semilog lines/.style={black},
}
\UnitedB
\semilog{-2}{3}{-10}{10}
\BodeGraph{-2:3}{\KAmp{2}}
\BodeGraph{-2:3}{\KAmp{1}}
\BodeGraph{-2:3}{\KAmp{0.5}}
\end{tikzpicture}
\end{figure}

\textbf{Termine monomio}
Si rappresenta il termine $W_b$
$$
|W_b(j\omega)|_{\si{\deci\bel}} = 20\log_{10}\left|\frac{1}{j\omega}\right| =
-20\log_{10} |j\omega| = -20 \log_{10} (\omega)
$$
\begin{figure}[h]
\centering
\begin{tikzpicture}[
gnuplot def/.append style={prefix={tikz/}}]
\begin{scope}[xscale=7/4,yscale=3/80]
\tikzset{
semilog lines/.style={black},
}
\UnitedB
\semilog{-2}{2}{-40}{40}
\BodeGraph{-2:2}{\IntAmp{1}}
\BodeGraph{-1:1}{-20*2*log10(10**t)}
\end{scope}
\end{tikzpicture}
\end{figure}
Si ottiene una retta con pendenza \SI{-20}{\deci\bel/dec} (\textit{deciBel per
decade}), se ci fosse più di un polo nell'origine, si avrebbe un esponente $g$
sul termine $j\omega$ che diventerebbe un fattore moltiplicativo della pendenza
della retta, in questo caso se i poli sono due la retta ha una pendenza di
\SI{-40}{\deci\bel/dec}.
Viceversa se ci fossero degli zeri nell'origine, quindi $g$ negativo, si
avrebbe una pendenza della retta positiva.
Si usa spesso una pendenza compatta $-1,-2,+1,+2$ riferendosi al coefficiente
$g$ e non al prodotto completo per 20, quindi con una pendenza $-1$ si indica
\SI{-20}{\deci\bel/dec}, con $-2$ saranno \SI{-40}{\deci\bel/dec} e così via.

\textbf{Termine binomio}
Si vuole rappresentare il modulo del binomio $W_c(j\omega)$
$$
|W_c(j\omega)| = 20\log_{10}\left|\frac{1}{1+j\omega\tau}\right| =
-20\log_{10}|1+j\omega \tau| = -20\log_{10}\sqrt{1+(\omega\tau)^2}
$$
Per studiare con comodità questa funzione può essere comodo eseguire prima
l'analisi asintotica, ossia l'analisi per $\omega$ molto piccoli e molto
grandi, si approssima la funzione
$$
|W_c(j\omega)| \simeq
\left\{\begin{aligned}
&-20\log_{10}\sqrt{1} = 0 &  & \omega \ll \frac{1}{|\tau|}\\
&-20\log_{10}|\omega\tau| &  & \omega \gg \frac{1}{|\tau|}
\end{aligned}\right.
$$
La retta in questo caso non passerà più per l'origine (1,0) ma per il punto
($\frac{1}{|\tau|}$,0), una decade dopo il punto di intersezione il diagramma
coincide con la retta asintotica e l'errore è trascurabile.
\begin{figure}[h]
\def\tau{0.5}
\centering
\begin{tikzpicture}[
gnuplot def/.append style={prefix={tikz/}}]
\begin{scope}[xscale=7/3,yscale=3/60]
\tikzset{
semilog lines/.style={black},
}
\UnitedB
\semilog{-1}{2}{-40}{20}
\BodeGraph[asymp lines,samples=100]{-1:2}
{\POAmpAsymp{1}{\tau}}
\BodeGraph{-1:2}{\POAmp{1}{\tau}}
\end{scope}
\end{tikzpicture}
\caption{$\frac{1}{1+j\omega\cdot\tau}$}
\end{figure}
È facile individuare il \textit{punto di rottura} 45:10
